bm32 â† =âŒœËœâ†•32

pcre2_options â‡ {
  zero_terminated â‡ unset â‡ âŠ‘âŸ¨1,64âŸ©â€¢bit._Cast 64â¥Š1

  [
    anchored
    no_utf_check
    endanchored
  ] â‡ 31â€¿30â€¿29âŠbm32

  [
    allow_empty_class
    alt_bsux
    auto_callout
    caseless
    dollar_endonly
    dotall
    dupnames
    extended
    firstline
    match_unset_backref
    multiline
    never_ucp
    never_utf
    no_auto_capture
    no_auto_possess
    no_dotstar_anchor
    no_start_optimize
    ucp
    ungreedy
    utf
    never_backslash_c
    alt_circumflex
    alt_verbnames
    use_offset_limit
    extended_more
    literal
    match_invalid_utf
  ] â‡ 27â†‘bm32

  [
    extra_allow_surrogate_escapes
    extra_bad_escape_is_literal
    extra_match_word
    extra_match_line
    extra_escaped_cr_is_lf
    extra_alt_bsux
    extra_allow_lookaround_bsk
  ] â‡ 7â†‘bm32

  [
    jit_complete
    jit_partial_soft
    jit_partial_hard
    jit_invalid_utf
  ] â‡ 0â€¿1â€¿2â€¿8âŠbm32

  [
    notbol
    noteol
    notempty
    notempty_atstart
    partial_soft
    partial_hard
    dfa_restart
    dfa_shortest
    substitute_global
    substitute_extended
    substitute_unset_empty
    substitute_unknown_unset
    substitute_overflow_length
    no_jit
    copy_matched_subject
    substitute_literal
    substitute_matched
    substitute_replacement_only
  ] â‡ 18â†‘bm32

  [
    convert_utf
    convert_no_utf_check
    convert_posix_basic
    convert_posix_extended
  ] â‡ 4â†‘bm32

  convert_glob â‡ 4âŠbm32
  convert_glob_no_wild_separator â‡ convert_glob âˆ¨ 5âŠbm32
  convert_glob_no_starstar â‡ convert_glob âˆ¨ 6âŠbm32
}

validOpts â† âˆ¾âŸ¨

  compOpts â† âŸ¨
    "anchored"
    "allowemptyclass"
    "altbsux"
    "altcircumflex"
    "altverbnames"
    "autocallout"
    "caseless"
    "dollarendonly"
    "dotall"
    "dupnames"
    "endanchored"
    "extended"
    "firstline"
    "literal"
    "matchinvalidutf"
    "matchunsetbackref"
    "multiline"
    "neverbackslashc"
    "neverucp"
    "neverutf"
    "noautocapture"
    "noautopossess"
    "nodotstaranchor"
    "nostartoptimize"
    "noutfcheck"
    "ucp"
    "ungreedy"
    "useoffsetlimit"
    "utf"
  âŸ©

  jitOpts â† âŸ¨
    "jitcomplete"
    "jitpartialsoft"
    "jitpartialhard"
  âŸ©

  matchOpts â† âŸ¨
    "anchored"
    "copymatchedsubject"
    "endanchored"
    "notbol"
    "noteol"
    "notempty"
    "notemptyatstart"
    "nojit"
    "noutfcheck"
    "partialhard"
    "partialsoft"
  âŸ©

  subOpts â† âŸ¨
    "anchored"
    "endanchored"
    "notbol"
    "noteol"
    "notempty"
    "notemptyatstart"
    "nojit"
    "noutfcheck"
    "substituteextended"
    "substituteglobal"
    "substituteliteral"
    "substitutematched"
    "substituteoverflowlength"
    "substitutereplacementonly"
    "substituteunknownunset"
    "substituteunsetempty"
  âŸ©

  otherOpts â† âŸ¨
    "pcre2parentfolder"
    "mode"
    "usejit"
    "overlapping"
    "initsubbuf"
    "depthlimit"
    "matchlimit"
    "heaplimit"
    "offsetlimit"
  âŸ©
âŸ©

_set â† {o group _ğ•£ mask:
  Get â† â€¢ns.GetÂ¨ â‹„ Keys â† â€¢ns.Keys
  E â† âŠ¢âŠ£"non-boolean option value"!Â·âˆ§Â´âŠ¢âˆŠ0â€¿1Ë™
  valid â† âˆŠâŸœgroupâŠ¸/ Keys o
  offâ€¿on â† âˆ¨Â´Â¨ (o Eâˆ˜Get valid) âˆ¾âŸœ2âŠ¸âŠ” pcre2_options Get valid
  off Â¬âŠ¸âˆ§ mask âˆ¨ on
}

empty_opt â† {
  pcre2parentfolder â‡ ""
  mode â‡ ""

  usejit â‡ 0
  overlapping â‡ 0
  initsubbuf â‡ 0

  depthlimit â‡ @
  matchlimit â‡ @
  heaplimit â‡ @
  offsetlimit â‡ @

  comp â‡ 32â¥Š0
  jit â‡ 32â¥Š0
  match â‡ 32â¥Š0
  sub â‡ 32â¥Š0
}

Get â† â€¢ns.HasâŸœâŠ‘â—¶âŸ¨1âŠ¸âŠ‘, â€¢ns.GetâŸœâŠ‘âŸ©

SetOptions â‡ {
  ğ•Š new: new ğ•Š empty_opt;
  new ğ•Š old:
    (0!Ëœ"invalid option "âˆ¾âˆ¾âŸœ", "âŠ¸âˆ¾Â´)âŸ(Ã—â‰ ) (/âˆ˜Â¬ âˆŠâŸœvalidOpts)âŠ¸âŠ â€¢ns.Keys new

    mode â‡ ("c8"â€¿"c16"â€¿"c32"â€¿"utf8"âŠ‘âˆ˜âŠ<)âŸ(0â‰¡â€¢Type) new Get âŸ¨"mode", old.modeâŸ©
    comp â‡ {new â€¢ns.Has "mode"? {utfâ‡3â‰¡mode} CompOpts _Set old.comp; old.comp}

    pcre2parentfolder â‡ new Get âŸ¨"pcre2parentfolder", old.pcre2parentfolderâŸ©

    usejit      â‡ new Get âŸ¨"usejit",      old.usejit      âŸ©
    overlapping â‡ new Get âŸ¨"overlapping", old.overlapping âŸ©
    initsubbuf  â‡ new Get âŸ¨"initsubbuf",  old.initsubbuf  âŸ©
    depthlimit  â‡ new Get âŸ¨"depthlimit",  old.depthlimit  âŸ©
    matchlimit  â‡ new Get âŸ¨"matchlimit",  old.matchlimit  âŸ©
    heaplimit   â‡ new Get âŸ¨"heaplimit",   old.heaplimit   âŸ©
    offsetlimit â‡ new Get âŸ¨"offsetlimit", old.offsetlimit âŸ©

    comp  â†© new CompOpts  _set comp
    jit   â‡ new JitOpts   _set old.jit
    match â‡ new MatchOpts _set old.match
    sub   â‡ new SubOpts   _set old.sub
}
